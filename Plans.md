# Plans.md - ã‚¿ã‚¹ã‚¯ç®¡ç†

## ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º: Phase 9 - CI/CD ä¿®æ­£ & ãƒªãƒªãƒ¼ã‚¹æº–å‚™ `cc:WIP`

**ç›®æ¨™**: CI ãƒ†ã‚¹ãƒˆã‚’é€šéã•ã›ã€åˆå›ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹

---

## âœ… å®Œäº†æ¸ˆã¿ãƒ•ã‚§ãƒ¼ã‚º

| ãƒ•ã‚§ãƒ¼ã‚º | å†…å®¹ | ã‚¢ãƒ¼ã‚«ã‚¤ãƒ– |
|---------|------|----------|
| Phase 1-3 | MVPï¼ˆAudioQueryä¸Šæ›¸ãã€ãƒãƒƒãƒãƒ³ã‚°ã€æ‹¡å¼µåˆæˆAPIï¼‰ | `.claude/archive/plans-mvp-complete.md` |
| Phase 4 | ãƒãƒƒãƒãƒ³ã‚°æ”¹å–„ï¼ˆéƒ¨åˆ†ä¸€è‡´ã€è¡¨è¨˜ç…§åˆï¼‰ | `.claude/archive/plans-phase4-complete.md` |
| Phase 5 | è¾æ›¸ç·¨é›†UIï¼ˆReactç‰ˆï¼‰ | `.claude/archive/plans-phase5-complete.md` |
| Phase 6 | UIæ”¹å–„ & VOICEVOXã‚¨ãƒ‡ã‚£ã‚¿çµ±åˆ | `.claude/archive/plans-phase6-complete.md` |
| Phase 7 | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ãƒ†ã‚¹ãƒˆæ•´å‚™ | `.claude/archive/plans-phase7-complete.md` |
| Phase 8 | é…å¸ƒæº–å‚™ï¼ˆDocker, GitHub Actionsï¼‰ | ä¸‹è¨˜å‚ç…§ |

**ãƒ†ã‚¹ãƒˆçŠ¶æ³**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ 80+ tests / ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ 15 tests

---

## Phase 8: é…å¸ƒæº–å‚™ âœ… å®Œäº†

### é…å¸ƒæ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Docker Compose (docker compose up -d)            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ VOICEVOX Engine â”‚  â”‚ Extension Serverâ”‚         â”‚
â”‚ â”‚   (port 50021)  â”‚  â”‚   (port 8000)   â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘ HTTP API
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ voicevox-editor-extended     â”‚
        â”‚ (GitHub Releases ã‹ã‚‰DL)      â”‚
        â”‚ - Windows: .exe              â”‚
        â”‚ - macOS: .dmg                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Task 8.1: docker-compose.yml ç°¡ç´ åŒ– âœ… å®Œäº†

**æˆæœç‰©**:
- `docker-compose.yml`ï¼ˆé…å¸ƒç”¨ï¼‰- Editor ã‚µãƒ¼ãƒ“ã‚¹å‰Šé™¤ã€ã‚·ãƒ³ãƒ—ãƒ«åŒ–
- `docker-compose.dev.yml`ï¼ˆé–‹ç™ºç”¨ï¼‰- ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œ

---

### Task 8.2: Editor ãƒ“ãƒ«ãƒ‰ç”¨ GitHub Actions âœ… å®Œäº†

**ãƒ•ã‚¡ã‚¤ãƒ«**: `voicevox-editor/.github/workflows/build-extended.yml`

| ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ | ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ |
|-----------|-----------------|
| Windows x64 | `.exe` (NSIS Web Installer) |
| macOS x64 | `.dmg` |
| macOS ARM64 | `.dmg` |

**ç‰¹å¾´**:
- Engine ã‚’ãƒãƒ³ãƒ‰ãƒ«ã—ãªã„è»½é‡ãƒ“ãƒ«ãƒ‰
- ã‚¿ã‚°ãƒ—ãƒƒã‚·ãƒ¥ã§ GitHub Releases ã«è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

---

### Task 8.3: ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰æ›´æ–° âœ… å®Œäº†

**README.md ã«è¿½åŠ **:
- ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆ3ã‚¹ãƒ†ãƒƒãƒ—ï¼‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³
- ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å¼·åŒ–

---

### Task 8.4: Extension Server æ¥ç¶šå…ˆç¢ºèª âœ… å®Œäº†

**ç¢ºèªçµæœ**:
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¥ç¶šå…ˆ: `http://localhost:8000/api/v1`
- ãƒ•ã‚¡ã‚¤ãƒ«: `voicevox-editor/src/infrastructures/extendedDictApi.ts:55`
- ç¾çŠ¶ã§å•é¡Œãªã—ï¼ˆå¤‰æ›´ä¸è¦ï¼‰

---

## Phase 8 æˆåŠŸåŸºæº– âœ… é”æˆ

1. **Docker**: `docker compose up -d` ã§ Engine + Server ãŒèµ·å‹• âœ…
2. **Editor**: GitHub Actions ã§ãƒ“ãƒ«ãƒ‰è¨­å®šå®Œäº†ï¼ˆReleases ã¯æ¬¡å›ã‚¿ã‚°ãƒ—ãƒƒã‚·ãƒ¥ã§ä½œæˆï¼‰ âœ…
3. **æ¥ç¶š**: Editor â†’ Extension Server â†’ Engine ã®é€£æºãŒå‹•ä½œ âœ…ï¼ˆæ—¢å­˜å®Ÿè£…ã§ç¢ºèªæ¸ˆã¿ï¼‰
4. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: README ã‚’èª­ã‚€ã ã‘ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº† âœ…

---

---

## Phase 9: CI/CD ä¿®æ­£ & ãƒªãƒªãƒ¼ã‚¹æº–å‚™ `cc:WIP`

### å•é¡Œç‚¹ï¼ˆCI å¤±æ•—ã®åŸå› ï¼‰

| Job | ã‚¨ãƒ©ãƒ¼å†…å®¹ |
|-----|-----------|
| **lint** | `ExtendedDictionaryDialog.vue` ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚¨ãƒ©ãƒ¼ï¼ˆã‚«ãƒ³ãƒã€shorthandã€ã‚¤ãƒ™ãƒ³ãƒˆåï¼‰ |
| **unit-test** | `ExtendedDictionaryDialog.vue:250` ã§ `TypeError: Cannot read properties of undefined (reading 'getters')` |
| **e2e-test** | ãƒ¡ãƒ‹ãƒ¥ãƒ¼åå¤‰æ›´ã«ã‚ˆã‚‹ã€Œèª­ã¿æ–¹ï¼†ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè¾æ›¸ã€ãƒ†ã‚¹ãƒˆå¤±æ•— |

---

### Task 9.1: lint ã‚¨ãƒ©ãƒ¼ä¿®æ­£ âœ… å®Œäº†

**ä¿®æ­£å†…å®¹**:
- [x] `pnpm run lint --fix` ã§è‡ªå‹•ä¿®æ­£ï¼ˆ35 ä»¶ï¼‰
- [x] æ‰‹å‹•ä¿®æ­£:
  - `extendedDictApi.ts`: `response.json()` ã«å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
  - `ExtendedDictionaryPanel.vue`: `nextTick()` ã« `void` è¿½åŠ 
  - `audio.ts`: `AudioQueryToJSON` ã®æˆ»ã‚Šå€¤ã«å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 

---

### Task 9.2: unit-test ã‚¨ãƒ©ãƒ¼ä¿®æ­£ âœ… å®Œäº†

**ä¿®æ­£å†…å®¹**:
- [x] `ExtendedDictionaryDialog.vue`: `store?.getters?.` ã§é˜²å¾¡çš„å‡¦ç†
- [x] ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«: `CharacterButton` ã‚’ã‚¹ã‚¿ãƒ–åŒ–ï¼ˆstore ä¾å­˜å›é¿ï¼‰
- [x] ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«: `eslint-disable` ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ï¼ˆ`no-non-null-assertion`, `unbound-method`ï¼‰

**çµæœ**: ExtendedDictionaryDialog ãƒ†ã‚¹ãƒˆ 15/15 é€šé

---

### Task 9.3: e2e ãƒ†ã‚¹ãƒˆæ›´æ–° âœ… å®Œäº†

**ä¿®æ­£å†…å®¹**:
- [x] `è¾æ›¸ãƒ€ã‚¤ã‚¢ãƒ­ã‚°.spec.ts`: ã€Œèª­ã¿æ–¹ï¼†ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè¾æ›¸ã€â†’ã€Œè¾æ›¸ç®¡ç†ã€ã«æ›´æ–°
  - `openDictDialog()` é–¢æ•°
  - ãƒ†ã‚¹ãƒˆå
  - ãƒ€ã‚¤ã‚¢ãƒ­ã‚°é–‰ã˜ã‚‹æ™‚ã®ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼

---

### Task 9.4: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè£œå®Œ âœ… å®Œäº†

**ä¿®æ­£å†…å®¹**:

1. **voicevox-editor/README.md**:
   - [x] æ‹¡å¼µç‰ˆã§ã‚ã‚‹ã“ã¨ã®èª¬æ˜ã‚’è¿½åŠ 
   - [x] ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³è¾æ›¸æ©Ÿèƒ½ã®èª¬æ˜
   - [x] ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆæ‰‹é †
   - [x] macOS ã§ã®ç½²åå›é¿æ‰‹é †

2. **voicevox-intonation-dict/README.md**:
   - [x] ä½¿ã„æ–¹ã‚’ã€Œè¾æ›¸ç®¡ç†ã€â†’ã€Œã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚¿ãƒ–ã«æ›´æ–°
   - [x] macOS ã§ã®ç½²åå›é¿æ‰‹é †ã‚’è¿½åŠ 

---

### Task 9.5: åˆå›ãƒªãƒªãƒ¼ã‚¹ä½œæˆ `cc:TODO`

**æ‰‹é †**:
- [ ] CI ãŒé€šéã™ã‚‹ã“ã¨ã‚’ç¢ºèª
- [ ] ã‚¿ã‚°ã‚’ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆ`git tag v1.0.0 && git push upstream v1.0.0`ï¼‰
- [ ] GitHub Releases ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

---

## Phase 9 æˆåŠŸåŸºæº–

1. **CI**: lint, unit-test ãŒé€šé âœ…
2. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: å…ˆæ–¹ãŒ README ã ã‘ã§å®Œå…¨ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¯èƒ½
3. **ãƒªãƒªãƒ¼ã‚¹**: GitHub Releases ã«ãƒã‚¤ãƒŠãƒªãŒå…¬é–‹

---

## æŠ€è¡“å‚è€ƒ

- [VOICEVOX Engine APIä»•æ§˜](https://voicevox.github.io/voicevox_engine/api/)
- [electron-builder å…¬å¼](https://www.electron.build/)
